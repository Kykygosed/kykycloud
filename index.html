<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Three.js iPad SAFE</title>
<style>
body { margin:0; overflow:hidden; background:#000; }
#debug {
  position:fixed;
  bottom:0; left:0;
  width:100%; max-height:40%;
  background:#000;
  color:#0f0;
  font-family:monospace;
  font-size:12px;
  overflow:auto;
  z-index:9999;
}
</style>
</head>
<body>

<div id="debug"></div>

<script>
function log(msg){
  document.getElementById('debug').innerHTML += msg + '<br>';
}
log('JS démarré');
</script>

<!-- Three.js CLASSIQUE -->
<script src="https://unpkg.com/three@0.159.0/build/three.min.js"></script>

<!-- GLTFLoader COMPAT iPad -->
<script src="https://unpkg.com/three@0.159.0/examples/js/loaders/GLTFLoader.js"></script>

<script>
log('Three.js chargé');
log('THREE.GLTFLoader = ' + typeof THREE.GLTFLoader);

var scene, camera, renderer;

window.onload = function () {

  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x222222);

  camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 1000);
  camera.position.set(3,2,5);

  renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(innerWidth, innerHeight);
  document.body.appendChild(renderer.domElement);

  scene.add(new THREE.AmbientLight(0xffffff, 0.6));
  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(5,10,5);
  scene.add(light);

  log('Scène initialisée');

  var loader = new THREE.GLTFLoader();

  loader.load(
    './plane.glb',
    function (gltf) {
      log('GLB chargé');
      var plane = gltf.scene;
      plane.scale.set(0.01,0.01,0.01);
      scene.add(plane);
    },
    undefined,
    function (e) {
      log('ERREUR GLB');
      log(e.message || e);
    }
  );

  animate();
};

function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}
</script>

</body>
</html>
